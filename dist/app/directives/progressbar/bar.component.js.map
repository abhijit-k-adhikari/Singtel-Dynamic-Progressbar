{"version":3,"sources":["app/directives/progressbar/bar.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,qBAAwD,eAAe,CAAC,CAAA;AACxE,uBAA+B,iBAAiB,CAAC,CAAA;AAEjD,mCAAuB,sBAAsB,CAAC,CAAA;AAkB9C;IAoBI,aAA2B,QAAiB;QAAjB,aAAQ,GAAR,QAAQ,CAAS;QALrC,YAAO,GAAU,CAAC,CAAC;IAM1B,CAAC;IAlBQ,sBAAW,sBAAK;aAAhB;YACL,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACvB,CAAC;aAED,UAAiB,CAAQ;YACrB,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAChB,MAAM,CAAC;YACX,CAAC;YACD,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YAChB,IAAI,CAAC,qBAAqB,EAAE,CAAC;QACjC,CAAC;;;OARA;IAkBD,sBAAQ,GAAR;QACI,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAC/B,CAAC;IAED,yBAAW,GAAX;QACI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;IAClC,CAAC;IAEM,mCAAqB,GAA5B;QACI,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAElE,IAAI,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,KAAK,EAAE,GAAG;YAChE,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC;QAC/B,CAAC,EAAE,CAAC,CAAC,CAAC;QAEN,EAAE,CAAC,CAAC,eAAe,GAAG,GAAG,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,OAAO,IAAI,eAAe,GAAG,GAAG,CAAC;QAC1C,CAAC;IACL,CAAC;IAxCD;QAAC,YAAK,EAAE;;qCAAA;IAER;QAAC,YAAK,EAAE;;oCAAA;IAnBZ;QAAC,gBAAS,CAAC;YACP,QAAQ,EAAE,YAAY;YACtB,UAAU,EAAE,CAAC,gBAAO,EAAE,gBAAO,CAAC;YAC9B,QAAQ,EAAE,maAWb;SACA,CAAC;mBAqBe,WAAI,EAAE;;WArBrB;IA2CF,UAAC;AAAD,CA1CA,AA0CC,IAAA;AA1CY,WAAG,MA0Cf,CAAA","file":"bar.component.js","sourcesContent":["import {Component, OnInit, OnDestroy, Input, Host} from '@angular/core';\r\nimport {NgClass, NgStyle} from '@angular/common';\r\n\r\nimport {Progress} from './progress.directive';\r\n\r\n@Component({\r\n    selector: 'bar, [bar]',\r\n    directives: [NgClass, NgStyle],\r\n    template: `\r\n  <div class=\"progress-bar\"\r\n    style=\"min-width: 0;\"\r\n    role=\"progressbar\"\r\n    [ngClass]=\"type && 'progress-bar-' + type\"\r\n    [ngStyle]=\"{width: (percent < 100 ? percent : 100) + '%', transition: transition}\"\r\n    aria-valuemin=\"0\"\r\n    [attr.aria-valuenow]=\"value\"\r\n    [attr.aria-valuetext]=\"percent.toFixed(0) + '%'\"\r\n    [attr.aria-valuemax]=\"max\"\r\n    ><ng-content></ng-content></div>\r\n`\r\n})\r\nexport class Bar implements OnInit, OnDestroy {\r\n    @Input() public type:string;\r\n\r\n    @Input() public get value():number {\r\n        return this._value;\r\n    }\r\n\r\n    public set value(v:number) {\r\n        if (!v && v !== 0) {\r\n            return;\r\n        }\r\n        this._value = v;\r\n        this.recalculatePercentage();\r\n    }\r\n\r\n    public percent:number = 0;\r\n    public transition:string;\r\n\r\n    private _value:number;\r\n\r\n    constructor(@Host() public progress:Progress) {\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.progress.addBar(this);\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.progress.removeBar(this);\r\n    }\r\n\r\n    public recalculatePercentage() {\r\n        this.percent = +(100 * this.value / this.progress.max).toFixed(2);\r\n\r\n        let totalPercentage = this.progress.bars.reduce(function (total, bar) {\r\n            return total + bar.percent;\r\n        }, 0);\r\n\r\n        if (totalPercentage > 100) {\r\n            this.percent -= totalPercentage - 100;\r\n        }\r\n    }\r\n}\r\n"]}